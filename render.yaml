services:
  - type: web
    name: waterman
    env: node
    buildCommand: npm install && npx puppeteer browsers install chrome && npm run build
    startCommand: npm start
    envVars:
      - key: NEXT_PUBLIC_CONVEX_URL
        sync: false

  - type: cron
    name: waterman-scraper
    schedule: "0 0,6,12,18 * * *"  # Run at midnight, 6 AM, noon, and 6 PM UTC (4 times per day)
    env: node
    buildCommand: npm install && npx puppeteer browsers install chrome
    startCommand: node scripts/scrape.mjs
    envVars:
      - key: NEXT_PUBLIC_CONVEX_URL
        sync: false

